<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text Survival</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --warmth: 0.5;
            --vitality: 1;
        }

        body {
            font-family: 'Courier New', Courier, monospace;
            font-size: 16px;
            font-weight: 500;
            line-height: 1.5;
            min-height: 100vh;
            transition: background-color 0.4s, color 0.4s;
        }

        /* ========== NIGHT MODE ========== */
        body.night {
            background-color: #0a0a0c;
            color: #e0e0e0;
        }

        body.night .game-container {
            --border-color: #1e1e22;
            --text-dim: #909090;
            --text-faint: #585858;
            --accent-color: color-mix(in srgb, #4a7090, #d08040 calc(var(--warmth) * 100%));
            --fire-color: color-mix(in srgb, #405060, #e08830 calc(var(--warmth) * 100%));
        }

        body.night {
            background-image: linear-gradient(
                to bottom,
                color-mix(in srgb, transparent, rgba(30, 50, 90, calc((1 - var(--warmth)) * 0.5)) 100%),
                transparent 70%
            );
        }

        /* ========== TWILIGHT MODE ========== */
        body.twilight {
            background-color: #2a2535;
            color: #e8e4e0;
        }

        body.twilight .game-container {
            --border-color: #3a3545;
            --text-dim: #a09a94;
            --text-faint: #686058;
            --accent-color: color-mix(in srgb, #6a6a9a, #d08050 calc(var(--warmth) * 100%));
            --fire-color: color-mix(in srgb, #505068, #e08840 calc(var(--warmth) * 100%));
        }

        body.twilight {
            background-image: linear-gradient(
                to bottom,
                color-mix(in srgb, transparent, rgba(50, 40, 80, calc((1 - var(--warmth)) * 0.4)) 100%),
                color-mix(in srgb, transparent, rgba(90, 50, 30, calc(var(--warmth) * 0.35)) 100%)
            );
        }

        /* ========== DAY MODE ========== */
        body.day {
            background-color: #f0ece8;
            color: #1a1815;
        }

        body.day .game-container {
            --border-color: #c8c4c0;
            --text-dim: #605850;
            --text-faint: #908880;
            --accent-color: color-mix(in srgb, #3a6080, #a06030 calc(var(--warmth) * 100%));
            --fire-color: color-mix(in srgb, #506878, #b86818 calc(var(--warmth) * 100%));
        }

        body.day {
            background-image: linear-gradient(
                to bottom,
                color-mix(in srgb, transparent, rgba(180, 210, 240, calc((1 - var(--warmth)) * 0.4)) 100%),
                transparent 70%
            );
        }

        /* ========== VITALITY VIGNETTE ========== */
        body::before {
            content: '';
            position: fixed;
            inset: 0;
            pointer-events: none;
            box-shadow: inset 0 0 
                calc((1 - var(--vitality)) * 120px) 
                calc((1 - var(--vitality)) * 40px) 
                rgba(100, 30, 30, calc((1 - var(--vitality)) * 0.5));
            transition: box-shadow 0.8s;
            z-index: 1000;
        }

        /* ========== LAYOUT ========== */
        .game-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            gap: 20px;
        }

        /* ========== HEADER ========== */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .time-display {
            color: var(--text-dim);
        }

        .day-number {
            font-size: 1.3em;
            margin-bottom: 2px;
        }

        body.night .day-number { color: #e0e0e0; }
        body.twilight .day-number { color: #e8e4e0; }
        body.day .day-number { color: #1a1815; }

        .time-detail {
            font-size: 0.9em;
        }

        .time-warning { color: #9a8a40; }

        .weather-line {
            font-size: 0.85em;
            margin-top: 4px;
            color: var(--text-dim);
        }

        .weather-cond { }
        .weather-cond.clear { color: #9ab; }
        .weather-cond.cloudy { color: #888; }
        .weather-cond.snow { color: #8cf; }
        .weather-cond.blizzard { color: #f66; }

        .fire-widget {
            text-align: right;
        }

        .fire-phase {
            font-size: 1.1em;
            margin-bottom: 2px;
        }

        .fire-phase.roaring { color: #e64; }
        .fire-phase.building, .fire-phase.steady { color: var(--fire-color); }
        .fire-phase.igniting, .fire-phase.dying { color: #996; }
        .fire-phase.embers { color: #864; }
        .fire-phase.cold { color: var(--text-dim); }

        .fire-time {
            font-size: 0.9em;
            color: var(--text-dim);
        }

        .fire-time.critical { color: #a04040; }
        .fire-time.warning { color: #9a8a40; }
        .fire-time.ok { color: #6a6; }

        .fire-detail {
            font-size: 0.8em;
            color: var(--text-dim);
        }

        .fire-heat { color: var(--fire-color); }

        /* ========== MAIN CONTENT ========== */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 200px;
            gap: 30px;
            flex: 1;
        }

        /* ========== NARRATIVE ========== */
        .narrative-panel {
            display: flex;
            flex-direction: column;
        }

        .location-display {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .location-name {
            font-size: 1.1em;
            margin-bottom: 2px;
        }

        .location-desc {
            font-size: 0.9em;
            color: var(--text-dim);
            font-style: italic;
            margin-bottom: 6px;
        }

        .location-features {
            font-size: 0.8em;
            color: var(--text-dim);
            display: flex;
            flex-wrap: wrap;
            gap: 4px 12px;
        }

        .feature-tag { }
        .feature-value.forage { color: #6a6; }
        .feature-value.game { color: #aa6; }
        .feature-value.water { color: #68a; }
        .feature-value.shelter { color: #6aa; }

        .narrative-log {
            flex: 1;
            max-height: 240px;
            overflow-y: auto;
            margin-bottom: 20px;
        }

        .log-entry {
            margin-bottom: 10px;
        }

        .log-entry.old { color: var(--text-dim); }
        .log-entry.danger { color: #b06060; }
        .log-entry.success { color: #6a9a6a; }
        .log-entry.warning { color: #9a8a50; }

        /* ========== STATUS BAR ========== */
        .status-bar {
            padding: 8px 0;
            margin-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
            font-size: 0.9em;
        }

        .status-content {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .status-text { color: var(--text-dim); }

        .progress-bar {
            flex: 1;
            height: 3px;
            background: var(--border-color);
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: #aa6;
            transition: width 0.2s;
        }

        .progress-fill.complete { background: #6a6; }

        .progress-percent {
            font-size: 0.85em;
            color: var(--text-dim);
            min-width: 32px;
            text-align: right;
        }

        /* ========== ACTIONS ========== */
        .actions-area {
            border-top: 1px solid var(--border-color);
            padding-top: 15px;
        }

        .action-group {
            margin-bottom: 12px;
        }

        .action-group-title {
            color: var(--text-faint);
            font-size: 0.75em;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 6px;
        }

        .action-list {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .action-btn {
            background: transparent;
            border: 1px solid var(--border-color);
            color: inherit;
            padding: 6px 12px;
            font-family: inherit;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.2s;
        }

        .action-btn:hover {
            border-color: var(--text-dim);
            background: rgba(128, 128, 128, 0.05);
        }

        .action-btn.primary {
            border-color: var(--accent-color);
            color: var(--accent-color);
        }

        .action-btn .time-cost {
            color: var(--text-dim);
            font-size: 0.85em;
            margin-left: 4px;
        }

        /* ========== SIDE PANEL ========== */
        .side-panel {
            border-left: 1px solid var(--border-color);
            padding-left: 20px;
            font-size: 0.9em;
        }

        .status-section {
            margin-bottom: 18px;
        }

        .status-title {
            color: var(--text-faint);
            font-size: 0.7em;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 8px;
        }

        /* Temperature */
        .temp-bar-container {
            margin-bottom: 6px;
        }

        .temp-bar {
            height: 4px;
            background: var(--border-color);
            border-radius: 2px;
            overflow: hidden;
        }

        .temp-bar-fill {
            height: 100%;
            transition: width 0.3s, background-color 0.3s;
        }

        .temp-bar-fill.hypothermia { background: #68a; }
        .temp-bar-fill.cool { background: #6aa; }
        .temp-bar-fill.normal { background: #6a6; }
        .temp-bar-fill.hot { background: #aa6; }
        .temp-bar-fill.hyperthermia { background: #a55; }

        .temp-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2px;
        }

        .temp-label { color: var(--text-dim); font-size: 0.9em; }
        .temp-value { }
        .temp-status { font-size: 0.85em; }
        .temp-status.normal { color: #6a6; }
        .temp-status.cool { color: #6aa; }
        .temp-status.cold { color: #68a; }
        .temp-status.hot { color: #aa6; }
        .temp-status.fever { color: #a55; }

        .temp-breakdown {
            font-size: 0.8em;
            color: var(--text-dim);
            margin-top: 2px;
        }

        .temp-breakdown .fire-contrib { color: var(--fire-color); }

        .temp-trend {
            font-size: 0.8em;
            margin-top: 2px;
        }

        .temp-trend.warming { color: #a86; }
        .temp-trend.cooling { color: #6aa; }
        .temp-trend.stable { color: var(--text-dim); }

        /* Survival stats */
        .survival-stat {
            margin-bottom: 6px;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2px;
        }

        .stat-name { color: var(--text-dim); }
        .stat-value { }
        .stat-value.low { color: #9a8a40; }
        .stat-value.critical { color: #a05050; }

        .stat-status {
            font-size: 0.85em;
            color: var(--text-dim);
            margin-left: 4px;
        }

        .stat-bar {
            height: 2px;
            background: var(--border-color);
        }

        .stat-bar-fill {
            height: 100%;
            transition: width 0.3s;
        }

        .stat-bar-fill.health { background: #a66; }
        .stat-bar-fill.food { background: #5a7a5a; }
        .stat-bar-fill.water { background: #5a7a9a; }
        .stat-bar-fill.energy { background: #7a6a8a; }
        .stat-bar-fill.low { background: #8a7a40; }
        .stat-bar-fill.critical { background: #8a4a4a; }

        /* Gear */
        .gear-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 3px;
            font-size: 0.9em;
        }

        .gear-label { color: var(--text-dim); }
        .gear-value.insulation { color: #6aa; }
        .gear-value.fuel { color: var(--fire-color); }

        /* Effects */
        .effects-list {
            font-size: 0.85em;
        }

        .effect-item {
            margin-bottom: 3px;
            display: flex;
            justify-content: space-between;
        }

        .effect-severity { color: var(--text-dim); font-size: 0.9em; }
        .effect-trend { margin-left: 2px; }

        .effect-item.worsening { color: #a66; }
        .effect-item.improving { color: #6a6; }
        .effect-item.stable { color: var(--text-dim); }

        /* Injuries */
        .injuries-list {
            font-size: 0.85em;
        }

        .injury-item {
            margin-bottom: 3px;
        }

        .injury-item.minor { color: var(--text-dim); }
        .injury-item.moderate { color: #aa6; }
        .injury-item.severe { color: #a86; }
        .injury-item.critical { color: #a55; }

        .injury-pct { color: var(--text-dim); font-size: 0.9em; }

        /* ========== FOOTER ========== */
        .footer {
            border-top: 1px solid var(--border-color);
            padding-top: 12px;
            display: flex;
            justify-content: space-between;
            color: var(--text-dim);
            font-size: 0.85em;
        }

        .inventory-peek {
            display: flex;
            gap: 15px;
        }

        /* ========== TEST CONTROLS ========== */
        .test-controls {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #0e0e10;
            border: 1px solid #2a2a2e;
            padding: 15px;
            font-size: 12px;
            z-index: 9999;
            width: 220px;
            color: #ccc;
            max-height: 90vh;
            overflow-y: auto;
        }

        .test-controls h3 {
            margin-bottom: 10px;
            margin-top: 12px;
            color: #888;
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .test-controls h3:first-child { margin-top: 0; }

        .control-row {
            margin-bottom: 8px;
        }

        .control-row label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2px;
            color: #888;
            font-size: 11px;
        }

        .control-row input[type="range"] {
            width: 100%;
        }

        .mode-buttons {
            display: flex;
            gap: 4px;
            margin-bottom: 12px;
        }

        .mode-btn {
            flex: 1;
            background: #1a1a1e;
            border: 1px solid #333;
            color: #888;
            padding: 6px 4px;
            font-size: 10px;
            cursor: pointer;
            font-family: inherit;
        }

        .mode-btn:hover {
            background: #252528;
            color: #ccc;
        }

        .mode-btn.active {
            background: #2a2a30;
            border-color: #555;
            color: #eee;
        }

        .preset-section {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #333;
        }

        .preset-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
        }

        .preset-btn {
            background: #1a1a1e;
            border: 1px solid #333;
            color: #888;
            padding: 4px 6px;
            font-size: 9px;
            cursor: pointer;
            font-family: inherit;
        }

        .preset-btn:hover {
            background: #252528;
            color: #bbb;
        }

        /* Scrollbar */
        .narrative-log::-webkit-scrollbar,
        .test-controls::-webkit-scrollbar {
            width: 4px;
        }

        .narrative-log::-webkit-scrollbar-track,
        .test-controls::-webkit-scrollbar-track {
            background: transparent;
        }

        .narrative-log::-webkit-scrollbar-thumb,
        .test-controls::-webkit-scrollbar-thumb {
            background: var(--border-color);
        }
    </style>
</head>
<body class="night">

    <div class="test-controls">
        <h3>Time of Day</h3>
        <div class="mode-buttons">
            <button class="mode-btn active" onclick="setMode('night')">Night</button>
            <button class="mode-btn" onclick="setMode('twilight')">Twilight</button>
            <button class="mode-btn" onclick="setMode('day')">Day</button>
        </div>

        <h3>Environment</h3>
        <div class="control-row">
            <label><span>Warmth</span><span id="warmthVal">0.50</span></label>
            <input type="range" id="warmthSlider" min="0" max="1" step="0.01" value="0.5">
        </div>
        <div class="control-row">
            <label><span>Vitality</span><span id="vitalityVal">1.00</span></label>
            <input type="range" id="vitalitySlider" min="0" max="1" step="0.01" value="1">
        </div>

        <h3>Player Stats</h3>
        <div class="control-row">
            <label><span>Health</span><span id="healthVal">85</span>%</label>
            <input type="range" id="healthSlider" min="0" max="100" step="1" value="85">
        </div>
        <div class="control-row">
            <label><span>Food</span><span id="foodVal">68</span>%</label>
            <input type="range" id="foodSlider" min="0" max="100" step="1" value="68">
        </div>
        <div class="control-row">
            <label><span>Water</span><span id="waterVal">34</span>%</label>
            <input type="range" id="waterSlider" min="0" max="100" step="1" value="34">
        </div>
        <div class="control-row">
            <label><span>Energy</span><span id="energyVal">72</span>%</label>
            <input type="range" id="energySlider" min="0" max="100" step="1" value="72">
        </div>

        <h3>Temperature</h3>
        <div class="control-row">
            <label><span>Body Temp</span><span id="bodyTempVal">97.8</span>°F</label>
            <input type="range" id="bodyTempSlider" min="87" max="104" step="0.1" value="97.8">
        </div>
        <div class="control-row">
            <label><span>Air Temp</span><span id="airTempVal">28</span>°F</label>
            <input type="range" id="airTempSlider" min="-20" max="80" step="1" value="28">
        </div>
        <div class="control-row">
            <label><span>Fire Heat</span><span id="fireHeatVal">15</span>°F</label>
            <input type="range" id="fireHeatSlider" min="0" max="60" step="1" value="15">
        </div>

        <h3>Fire</h3>
        <div class="control-row">
            <label><span>Fuel Minutes</span><span id="fireMinsVal">47</span></label>
            <input type="range" id="fireMinsSlider" min="0" max="180" step="1" value="47">
        </div>

        <h3>Progress</h3>
        <div class="control-row">
            <label><span>Progress</span><span id="progressVal">0</span>%</label>
            <input type="range" id="progressSlider" min="0" max="100" step="1" value="0">
        </div>

        <div class="preset-section">
            <h3>Presets</h3>
            <div class="preset-buttons">
                <button class="preset-btn" onclick="setPreset('safe')">Safe Camp</button>
                <button class="preset-btn" onclick="setPreset('cold-night')">Cold Night</button>
                <button class="preset-btn" onclick="setPreset('dawn')">Dawn</button>
                <button class="preset-btn" onclick="setPreset('bright-day')">Bright Day</button>
                <button class="preset-btn" onclick="setPreset('blizzard')">Blizzard</button>
                <button class="preset-btn" onclick="setPreset('dying')">Dying</button>
                <button class="preset-btn" onclick="setPreset('hypothermia')">Hypothermia</button>
            </div>
        </div>
    </div>

    <div class="game-container">
        <header class="header">
            <div class="time-display">
                <div class="day-number">Day 3</div>
                <div class="time-detail">2:34 PM — Afternoon</div>
                <div class="time-detail time-warning">2.4 hrs til dusk</div>
                <div class="weather-line">
                    <span class="weather-cond cloudy" id="weatherCond">Cloudy</span> · 
                    Wind: <span id="windLabel">Light</span> · 
                    Precip: <span id="precipLabel">None</span>
                </div>
            </div>

            <div class="fire-widget">
                <div class="fire-phase steady" id="firePhase">Fire: Steady</div>
                <div class="fire-time warning" id="fireTime">47 min remaining</div>
                <div class="fire-detail"><span id="fuelStatus">2.4 kg</span> · <span class="fire-heat" id="fireHeatOutput">+15°F</span></div>
            </div>
        </header>

        <main class="main-content">
            <div class="narrative-panel">
                <div class="location-display">
                    <div class="location-name">Camp — Sheltered Hollow</div>
                    <div class="location-desc">A shallow depression between rocks, shielded from the worst winds.</div>
                    <div class="location-features">
                        <span class="feature-tag">Forage: <span class="feature-value forage">Sticks, Bark</span></span>
                        <span class="feature-tag">Game: <span class="feature-value game">Rabbits</span></span>
                        <span class="feature-tag">Shelter: <span class="feature-value shelter">ins:40 wnd:60 cov:80</span></span>
                    </div>
                </div>

                <div class="narrative-log">
                    <div class="log-entry old">You wake stiff and cold. The fire has burned low overnight.</div>
                    <div class="log-entry old">Morning light filters through grey clouds. Snow fell in the night.</div>
                    <div class="log-entry">You add the last of your sticks to the fire. It catches slowly.</div>
                    <div class="log-entry warning">Your fuel supply is running low. The grove to the east should have fallen branches.</div>
                    <div class="log-entry">You eat a portion of cooked meat. The warmth spreads through you.</div>
                    <div class="log-entry success">Your hunger eases. Energy returns.</div>
                    <div class="log-entry">The fire settles into a steady burn. Heat radiates outward.</div>
                </div>

                <div class="status-bar" id="statusBar">
                    <div class="status-content">
                        <span class="status-text" id="statusText">—</span>
                        <div class="progress-bar" id="progressBarContainer" style="display: none;">
                            <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
                        </div>
                        <span class="progress-percent" id="progressPercent" style="display: none;">0%</span>
                    </div>
                </div>

                <div class="actions-area">
                    <div class="action-group">
                        <div class="action-group-title">Camp</div>
                        <div class="action-list">
                            <button class="action-btn">Rest<span class="time-cost">30m</span></button>
                            <button class="action-btn">Tend fire<span class="time-cost">5m</span></button>
                            <button class="action-btn">Eat</button>
                            <button class="action-btn">Drink</button>
                            <button class="action-btn">Craft</button>
                            <button class="action-btn">Inventory</button>
                        </div>
                    </div>

                    <div class="action-group">
                        <div class="action-group-title">Expedition</div>
                        <div class="action-list">
                            <button class="action-btn primary">Leave camp</button>
                        </div>
                    </div>
                </div>
            </div>

            <aside class="side-panel">
                <div class="status-section">
                    <div class="status-title">Temperature</div>
                    <div class="temp-bar-container">
                        <div class="temp-bar">
                            <div class="temp-bar-fill normal" id="tempBarFill" style="width: 72%;"></div>
                        </div>
                    </div>
                    <div class="temp-row">
                        <span class="temp-label">Body</span>
                        <span><span class="temp-value" id="bodyTempDisplay">97.8°F</span> <span class="temp-status normal" id="tempStatus">Normal</span></span>
                    </div>
                    <div class="temp-breakdown" id="tempBreakdown">
                        Air: <span id="airTempDisplay">28°F</span> + <span class="fire-contrib" id="fireContrib">Fire +15°F</span> = <span id="feltTemp">43°F</span>
                    </div>
                    <div class="temp-trend stable" id="tempTrend">→ Stable</div>
                </div>

                <div class="status-section">
                    <div class="status-title">Survival</div>
                    
                    <div class="survival-stat">
                        <div class="stat-row">
                            <span class="stat-name">Health</span>
                            <span><span class="stat-value" id="healthPct">85%</span><span class="stat-status" id="healthStatus">Fine</span></span>
                        </div>
                        <div class="stat-bar">
                            <div class="stat-bar-fill health" id="healthBar" style="width: 85%"></div>
                        </div>
                    </div>

                    <div class="survival-stat">
                        <div class="stat-row">
                            <span class="stat-name">Food</span>
                            <span><span class="stat-value" id="foodPct">68%</span><span class="stat-status" id="foodStatus">Satisfied</span></span>
                        </div>
                        <div class="stat-bar">
                            <div class="stat-bar-fill food" id="foodBar" style="width: 68%"></div>
                        </div>
                    </div>

                    <div class="survival-stat">
                        <div class="stat-row">
                            <span class="stat-name">Water</span>
                            <span><span class="stat-value low" id="waterPct">34%</span><span class="stat-status" id="waterStatus">Thirsty</span></span>
                        </div>
                        <div class="stat-bar">
                            <div class="stat-bar-fill water low" id="waterBar" style="width: 34%"></div>
                        </div>
                    </div>

                    <div class="survival-stat">
                        <div class="stat-row">
                            <span class="stat-name">Energy</span>
                            <span><span class="stat-value" id="energyPct">72%</span><span class="stat-status" id="energyStatus">Normal</span></span>
                        </div>
                        <div class="stat-bar">
                            <div class="stat-bar-fill energy" id="energyBar" style="width: 72%"></div>
                        </div>
                    </div>
                </div>

                <div class="status-section">
                    <div class="status-title">Gear</div>
                    <div class="gear-row">
                        <span class="gear-label">Carry</span>
                        <span class="gear-value" id="carryDisplay">4.2 / 15 kg</span>
                    </div>
                    <div class="gear-row">
                        <span class="gear-label">Insulation</span>
                        <span class="gear-value insulation" id="insulationPct">35%</span>
                    </div>
                    <div class="gear-row">
                        <span class="gear-label">Fuel</span>
                        <span class="gear-value fuel" id="fuelReserve">1.2kg (~1.5hrs)</span>
                    </div>
                </div>

                <div class="status-section">
                    <div class="status-title">Effects</div>
                    <div class="effects-list" id="effectsList">
                        <div class="effect-item stable">
                            <span>Thirsty</span>
                            <span><span class="effect-severity">34%</span></span>
                        </div>
                    </div>
                </div>

                <div class="status-section">
                    <div class="status-title">Injuries</div>
                    <div class="injuries-list" id="injuriesList">
                        <div class="injury-item minor">Left hand — scratched <span class="injury-pct">(92%)</span></div>
                    </div>
                </div>
            </aside>
        </main>

        <footer class="footer">
            <div class="inventory-peek">
                <div class="inv-item"><span class="count">2</span> meat</div>
                <div class="inv-item"><span class="count">0.8L</span> water</div>
                <div class="inv-item"><span class="count">3</span> sticks</div>
                <div class="inv-item"><span class="count">1</span> knife</div>
            </div>
            <div class="weight-display">
                <span class="current">4.2</span> / 15 kg
            </div>
        </footer>
    </div>

    <script>
        let currentMode = 'night';

        function setMode(mode) {
            document.body.classList.remove('night', 'twilight', 'day');
            document.body.classList.add(mode);
            currentMode = mode;

            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.toggle('active', 
                    btn.textContent.toLowerCase() === mode);
            });
        }

        function updateStyles() {
            const warmth = document.getElementById('warmthSlider').value;
            const vitality = document.getElementById('vitalitySlider').value;

            document.documentElement.style.setProperty('--warmth', warmth);
            document.documentElement.style.setProperty('--vitality', vitality);

            document.getElementById('warmthVal').textContent = parseFloat(warmth).toFixed(2);
            document.getElementById('vitalityVal').textContent = parseFloat(vitality).toFixed(2);
        }

        function updateStats() {
            const health = parseInt(document.getElementById('healthSlider').value);
            const food = parseInt(document.getElementById('foodSlider').value);
            const water = parseInt(document.getElementById('waterSlider').value);
            const energy = parseInt(document.getElementById('energySlider').value);

            document.getElementById('healthVal').textContent = health;
            document.getElementById('foodVal').textContent = food;
            document.getElementById('waterVal').textContent = water;
            document.getElementById('energyVal').textContent = energy;

            updateStatBar('health', health, getHealthStatus);
            updateStatBar('food', food, getFoodStatus);
            updateStatBar('water', water, getWaterStatus);
            updateStatBar('energy', energy, getEnergyStatus);
        }

        function updateStatBar(stat, percent, statusFn) {
            const bar = document.getElementById(stat + 'Bar');
            const pctEl = document.getElementById(stat + 'Pct');
            const statusEl = document.getElementById(stat + 'Status');

            bar.style.width = percent + '%';
            pctEl.textContent = percent + '%';
            statusEl.textContent = statusFn(percent);

            // Color classes
            pctEl.className = 'stat-value';
            bar.className = 'stat-bar-fill ' + stat;
            if (percent < 20) { 
                pctEl.classList.add('critical'); 
                bar.classList.add('critical'); 
            } else if (percent < 40) { 
                pctEl.classList.add('low'); 
                bar.classList.add('low'); 
            }
        }

        function getHealthStatus(pct) {
            if (pct >= 90) return 'Healthy';
            if (pct >= 70) return 'Fine';
            if (pct >= 50) return 'Hurt';
            if (pct >= 25) return 'Wounded';
            return 'Critical';
        }

        function getFoodStatus(pct) {
            if (pct >= 80) return 'Well Fed';
            if (pct >= 60) return 'Satisfied';
            if (pct >= 40) return 'Peckish';
            if (pct >= 20) return 'Hungry';
            return 'Starving';
        }

        function getWaterStatus(pct) {
            if (pct >= 80) return 'Hydrated';
            if (pct >= 60) return 'Fine';
            if (pct >= 40) return 'Thirsty';
            if (pct >= 20) return 'Parched';
            return 'Dehydrated';
        }

        function getEnergyStatus(pct) {
            if (pct >= 90) return 'Energized';
            if (pct >= 80) return 'Alert';
            if (pct >= 40) return 'Normal';
            if (pct >= 30) return 'Tired';
            if (pct >= 20) return 'Very Tired';
            return 'Exhausted';
        }

        function updateTemperature() {
            const bodyTemp = parseFloat(document.getElementById('bodyTempSlider').value);
            const airTemp = parseInt(document.getElementById('airTempSlider').value);
            const fireHeat = parseInt(document.getElementById('fireHeatSlider').value);

            document.getElementById('bodyTempVal').textContent = bodyTemp.toFixed(1);
            document.getElementById('airTempVal').textContent = airTemp;
            document.getElementById('fireHeatVal').textContent = fireHeat;

            document.getElementById('bodyTempDisplay').textContent = bodyTemp.toFixed(1) + '°F';

            // Temperature bar (87-102 range)
            const tempPct = Math.max(0, Math.min(100, (bodyTemp - 87) / (102 - 87) * 100));
            const tempBar = document.getElementById('tempBarFill');
            tempBar.style.width = tempPct + '%';

            tempBar.className = 'temp-bar-fill';
            if (bodyTemp < 95) tempBar.classList.add('hypothermia');
            else if (bodyTemp < 97) tempBar.classList.add('cool');
            else if (bodyTemp < 99) tempBar.classList.add('normal');
            else if (bodyTemp < 100) tempBar.classList.add('hot');
            else tempBar.classList.add('hyperthermia');

            const statusEl = document.getElementById('tempStatus');
            statusEl.className = 'temp-status';
            if (bodyTemp >= 100) { statusEl.textContent = 'Feverish'; statusEl.classList.add('fever'); }
            else if (bodyTemp >= 99) { statusEl.textContent = 'Hot'; statusEl.classList.add('hot'); }
            else if (bodyTemp >= 97) { statusEl.textContent = 'Normal'; statusEl.classList.add('normal'); }
            else if (bodyTemp >= 95) { statusEl.textContent = 'Cool'; statusEl.classList.add('cool'); }
            else { statusEl.textContent = 'Cold'; statusEl.classList.add('cold'); }

            // Air breakdown
            document.getElementById('airTempDisplay').textContent = airTemp + '°F';
            const feltTemp = airTemp + fireHeat;
            document.getElementById('feltTemp').textContent = feltTemp + '°F';

            const fireContrib = document.getElementById('fireContrib');
            if (fireHeat > 0) {
                fireContrib.textContent = 'Fire +' + fireHeat + '°F';
                fireContrib.style.display = '';
            } else {
                fireContrib.style.display = 'none';
            }

            document.getElementById('fireHeatOutput').textContent = '+' + fireHeat + '°F';

            // Trend
            const trendEl = document.getElementById('tempTrend');
            if (bodyTemp < 97 && feltTemp < 60) {
                trendEl.textContent = '↓ Cooling (-0.8°/hr)';
                trendEl.className = 'temp-trend cooling';
            } else if (bodyTemp > 99 && feltTemp > 80) {
                trendEl.textContent = '↑ Warming (+0.5°/hr)';
                trendEl.className = 'temp-trend warming';
            } else {
                trendEl.textContent = '→ Stable';
                trendEl.className = 'temp-trend stable';
            }
        }

        function updateFire() {
            const mins = parseInt(document.getElementById('fireMinsSlider').value);
            document.getElementById('fireMinsVal').textContent = mins;

            const phaseEl = document.getElementById('firePhase');
            const timeEl = document.getElementById('fireTime');

            let phase, phaseClass;
            if (mins === 0) { phase = 'Fire: Cold'; phaseClass = 'cold'; }
            else if (mins < 10) { phase = 'Fire: Embers'; phaseClass = 'embers'; }
            else if (mins < 20) { phase = 'Fire: Dying'; phaseClass = 'dying'; }
            else if (mins < 45) { phase = 'Fire: Steady'; phaseClass = 'steady'; }
            else if (mins < 90) { phase = 'Fire: Building'; phaseClass = 'building'; }
            else { phase = 'Fire: Roaring'; phaseClass = 'roaring'; }

            phaseEl.textContent = phase;
            phaseEl.className = 'fire-phase ' + phaseClass;

            timeEl.textContent = mins + ' min remaining';
            timeEl.className = 'fire-time';
            if (mins >= 30) timeEl.classList.add('ok');
            else if (mins >= 15) timeEl.classList.add('warning');
            else timeEl.classList.add('critical');
        }

        function updateProgress() {
            const pct = parseInt(document.getElementById('progressSlider').value);
            document.getElementById('progressVal').textContent = pct;

            const container = document.getElementById('progressBarContainer');
            const fill = document.getElementById('progressFill');
            const percentEl = document.getElementById('progressPercent');
            const textEl = document.getElementById('statusText');

            if (pct > 0) {
                container.style.display = '';
                percentEl.style.display = '';
                fill.style.width = pct + '%';
                percentEl.textContent = pct + '%';
                textEl.textContent = 'Resting...';

                fill.className = 'progress-fill';
                if (pct >= 100) fill.classList.add('complete');
            } else {
                container.style.display = 'none';
                percentEl.style.display = 'none';
                textEl.textContent = '—';
            }
        }

        function setPreset(name) {
            const presets = {
                'safe': { 
                    mode: 'night', warmth: 0.8, vitality: 0.95,
                    health: 90, food: 75, water: 80, energy: 85,
                    bodyTemp: 98.2, airTemp: 25, fireHeat: 25, fireMins: 90
                },
                'cold-night': { 
                    mode: 'night', warmth: 0.1, vitality: 0.8,
                    health: 75, food: 50, water: 45, energy: 60,
                    bodyTemp: 96.5, airTemp: -5, fireHeat: 8, fireMins: 25
                },
                'dawn': { 
                    mode: 'twilight', warmth: 0.4, vitality: 0.85,
                    health: 80, food: 60, water: 55, energy: 70,
                    bodyTemp: 97.5, airTemp: 32, fireHeat: 12, fireMins: 40
                },
                'bright-day': { 
                    mode: 'day', warmth: 0.7, vitality: 0.95,
                    health: 88, food: 70, water: 65, energy: 80,
                    bodyTemp: 98.4, airTemp: 45, fireHeat: 0, fireMins: 0
                },
                'blizzard': { 
                    mode: 'day', warmth: 0.05, vitality: 0.7,
                    health: 65, food: 40, water: 50, energy: 45,
                    bodyTemp: 95.8, airTemp: -15, fireHeat: 0, fireMins: 0
                },
                'dying': { 
                    mode: 'night', warmth: 0.15, vitality: 0.15,
                    health: 12, food: 8, water: 5, energy: 10,
                    bodyTemp: 93.2, airTemp: -10, fireHeat: 3, fireMins: 5
                },
                'hypothermia': {
                    mode: 'night', warmth: 0.0, vitality: 0.6,
                    health: 55, food: 50, water: 60, energy: 35,
                    bodyTemp: 91.5, airTemp: -20, fireHeat: 0, fireMins: 0
                }
            };

            const p = presets[name];
            if (!p) return;

            setMode(p.mode);
            
            document.getElementById('warmthSlider').value = p.warmth;
            document.getElementById('vitalitySlider').value = p.vitality;
            document.getElementById('healthSlider').value = p.health;
            document.getElementById('foodSlider').value = p.food;
            document.getElementById('waterSlider').value = p.water;
            document.getElementById('energySlider').value = p.energy;
            document.getElementById('bodyTempSlider').value = p.bodyTemp;
            document.getElementById('airTempSlider').value = p.airTemp;
            document.getElementById('fireHeatSlider').value = p.fireHeat;
            document.getElementById('fireMinsSlider').value = p.fireMins;

            updateAll();
        }

        function updateAll() {
            updateStyles();
            updateStats();
            updateTemperature();
            updateFire();
            updateProgress();
        }

        // Event listeners
        document.getElementById('warmthSlider').addEventListener('input', updateStyles);
        document.getElementById('vitalitySlider').addEventListener('input', updateStyles);
        document.getElementById('healthSlider').addEventListener('input', updateStats);
        document.getElementById('foodSlider').addEventListener('input', updateStats);
        document.getElementById('waterSlider').addEventListener('input', updateStats);
        document.getElementById('energySlider').addEventListener('input', updateStats);
        document.getElementById('bodyTempSlider').addEventListener('input', updateTemperature);
        document.getElementById('airTempSlider').addEventListener('input', updateTemperature);
        document.getElementById('fireHeatSlider').addEventListener('input', updateTemperature);
        document.getElementById('fireMinsSlider').addEventListener('input', updateFire);
        document.getElementById('progressSlider').addEventListener('input', updateProgress);

        updateAll();
    </script>
</body>
</html>